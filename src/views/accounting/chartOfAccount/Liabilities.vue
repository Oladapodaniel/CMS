<template>
  <div class="row">
    <div class="col-12 py-2 mt-4 account-head">
      Accounts Payable <small class="font-weight-normal">Current Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any credit card yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2">1202</div>
    <div class="col-6 col-md-3">
      <div class="desc-head">asset bank (USD)</div>
      <div class="desc">No transaction for this account</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 mt-4 account-head">
      Credit Card <small class="font-weight-normal">Current Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any credit card yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2">1202</div>
    <div class="col-6 col-md-3">
      <div class="desc-head">asset bank (USD)</div>
      <div class="desc">No transaction for this account</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 mt-4 account-head">
      Payroll Liabilities
      <small class="font-weight-normal">Current Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any credit card yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2">1202</div>
    <div class="col-6 col-md-3">
      <div class="desc-head">asset bank (USD)</div>
      <div class="desc">No transaction for this account</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 mt-4 account-head">
      Accrued Liabilities
      <small class="font-weight-normal">Current Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any credit card yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2">1202</div>
    <div class="col-6 col-md-3">
      <div class="desc-head">asset bank (USD)</div>
      <div class="desc">No transaction for this account</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 account-head">
      Notes and Loans Payable
      <small class="font-weight-normal">Current Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added anyLoan of Line Credit yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2">1202</div>
    <div class="col-6 col-md-3">
      <div class="desc-head">asset bank (USD)</div>
      <div class="desc">No transaction for this account</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 account-head">
      Duties and Taxes
      <small class="font-weight-normal">Current Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any Sales Taxes yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2"></div>
    <div class="col-6 col-md-3">
      <div class="desc-head">Accounts Payable</div>
      <div class="desc">No transaction for this account yet</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 account-head">
      Other Short Term Liabilities
      <small class="font-weight-normal">Current Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any Other Short-Term Liability Credit yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2"></div>
    <div class="col-6 col-md-3">
      <div class="desc-head">Accounts Payable</div>
      <div class="desc">No transaction for this account yet</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 account-head">
      Long Term Loans
      <small class="font-weight-normal">Long Term Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any Other Long-Term Liability Credit yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2"></div>
    <div class="col-6 col-md-3">
      <div class="desc-head">Accounts Payable</div>
      <div class="desc">No transaction for this account yet</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 account-head">
      Mortage <small class="font-weight-normal">Long Term Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any Other Long-Term Liability Credit yet.
    </div>
  </div>
  <div v-if="false" class="row row-border align-items-center py-2">
    <div class="col-6 col-md-2"></div>
    <div class="col-6 col-md-3">
      <div class="desc-head">Accounts Payable</div>
      <div class="desc">No transaction for this account yet</div>
    </div>
    <div class="col-6 col-md-5">Test Account</div>
    <div class="col-6 col-md-2 text-right">
      <i class="fa fa-pencil" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 py-2 account-head">
      Other Long Term Liabilities <small class="font-weight-normal">Long Term Liabilities</small
      ><i class="fa fa-question-circle-o help" aria-hidden="true"></i>
    </div>
  </div>
  <div class="row row-border align-items-center py-2">
    <div class="col-10 offset-md-2 text-center text-md-left">
      You haven't added any Other Long-Term Liability Credit yet.
    </div>
  </div>

  <div class="row">
    <div class="col-10 offset-md-2 text-center text-md-left">
      <div class="add-account py-3">
        <a class="c-pointer text-decoration-none primary-text" data-toggle="modal" data-target="#liabModal"><i class="fa fa-plus-circle"></i>&nbsp; &nbsp; Add a new Account</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <!-- BT MODAL -->
      <div
        class="modal fade"
        id="liabModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="liabModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title font-weight-bold" id="exampleModalLabel">
                Add an account
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <CreateAccountModal
                :transactionalAccounts="accounts"
                :accountTypes="accountTypes"
                :currencies="currencies"
                :financialAccountType="1"
              />
            </div>

          </div>
        </div>
      </div>
      <!-- END BT -->
    </div>
  </div>
</template>

<script>
import { computed, ref } from "vue";
import CreateAccountModal from "./components/CreateAccountForm";
import transactionals from "./utilities/transactionals";

export default {
    components: { CreateAccountModal },
  setup() {
    const view = ref(true);

    const accounts = ref([]);
    const getAccounts = async () => {
      try {
        accounts.value = await transactionals.getTransactionalAccounts();
        console.log(accounts.value);
      } catch (error) {
        console.log(error);
      }
    };
    getAccounts();

    const currencyList = ref([]);
    const getCurrencies = async () => {
      try {
        const response = await transactionals.getCurrencies();
        currencyList.value = response;
      } catch (error) {
        console.log(error);
      }
    };
    getCurrencies();

    const currencies = computed(() => {
        console.log(currencyList.value, "c list");
        if (!currencyList.value || currencyList.value.length === 0) return [ ];
        return currencyList.value;
    })

    const accountTypes = transactionals.accountTypes;
    return {
      view,
      accountTypes,
      currencyList,
      accounts,
      currencies,
    };
  },
};
</script>

<style scoped>
.row-border {
  border-bottom: 1px solid rgb(225, 225, 225);
}

.account-head {
  background: #e0e7eb;
  font-weight: 800;
}

.help {
  color: rgb(100, 100, 100);
  margin: 5px;
}

.desc {
  color: #190138;
  opacity: 0.6;
}

.desc-head {
  font-weight: 600;
}

.add-account {
  color: #136acd;
  font-weight: 800;
}

.modal-lg {
    max-width: 670px;
}
</style>